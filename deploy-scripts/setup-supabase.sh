#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Supabase –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
echo "üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ Prisma CLI
if ! command -v npx &> /dev/null; then
    echo "‚ùå npx –Ω–µ –Ω–∞–π–¥–µ–Ω. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Node.js"
    exit 1
fi

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º Prisma –∫–ª–∏–µ–Ω—Ç
echo "üì¶ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Prisma –∫–ª–∏–µ–Ω—Ç–∞..."
cd backend
npx prisma generate

# –ü—Ä–∏–º–µ–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏
echo "üóÑÔ∏è –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö..."
npx prisma db push

# –ó–∞–ø—É—Å–∫–∞–µ–º seed —Å–∫—Ä–∏–ø—Ç
echo "üå± –ó–∞–ø—É—Å–∫ seed —Å–∫—Ä–∏–ø—Ç–∞..."
npm run db:seed

echo "‚úÖ Supabase –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
echo "üìä –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –≤ Supabase Dashboard" 